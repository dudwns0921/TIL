# 모바일 앱 프로그래밍

## 1강. 안드로이드 프로젝트

### 1. 안드로이드 프로젝트의 개념

#### 1. 안드로이드 프로젝트를 구성하는 주요 파일 및 폴더

| 파일 및 폴더명               | 설명                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| java/MainActivity.java       | 스마트폰 화면을 구성하는 액티비티를 정의하는 파일로 앱 실행 시 처음으로 실행되는 코드를 정의 |
| build/R.java                 | 앱이 동작하면서 참조하는 자원(문자열, 이미지, 소리 등) 들의 ID가 정의된 파일 |
| res/drawable                 | 화면에 표시되는 이미지 파일(png, jpg, gif)이 저장되는 폴더   |
| res/layout/activity_main.xml | MainActivity.java에 대한 레이아웃을 정의하는 XML파일 / 화면을 구성하는 XML 파일 |
| res/values/strings.xml       | 앱이 동작하면서 참조하는 문자열들이 정의된 파일              |
| AndroidManifest.xml          | 앱에 대한 전반적인 정보를 담고 있는 파일로 앱의 구성요소나 권한 등을 정의 / 마이크 접근 권한, 주소록 접근 권한 등 |

#### 2. 안드로이드 프로젝트 구조

##### 안드로이드 프로젝트 주요 파일들의 참조 관계

![image-20240223075341373](D:\Elio Jung\TIL\방송통신대학교\4학년1학기\모바일앱프로그래밍\md-images\image-20240223075341373.png)

- MainActivity.java에서 변수를 쓸 때 주소록의 역할을 하는 R.java에서 찾아서 사용
- 주소록에는 Strings.xml, Activity_main.xml에 저장한 ID가 등록되어 있음

##### Activity 개념

- Activity란 하나의 화면을 표현하기 위한 구성요소
  - 실질적인 정의는 아니나 이해를 위해 처음엔 위와 같이 이해해두자!
- 여러 개의 Activity가 모여서 하나의 앱을 이룸
- xml은 데이터 / java는 실행 부분
- 둘을 연결해주는 것이 R.java

### 2. 안드로이드 프로젝트의 구성 1

#### activity_main.xml

- 화면의 레이아웃을 표현하는 레이아웃은 일반적으로 xml에 표현

#### strings.xml

- 리소스중 하나인 문자열은 관리의 편의성을 위해 XML 파일에 따로 정의
- 문자열이 정의되는 XML 파일은 기본적으로 strings.xml 파일임

#### R.java

- 안드로이드 앱이 사용하는 자원이 참조하기 위해 사용되는 ID가 정의된 클래스 R을 포함하고 있음
- 리소스 파일들을 컴파일 후 자동으로 리소스 ID를 R.java에 등록함
- AAPT에 의해 자동적으로 정의되고 사용되는 정보이기 때문에 개발자가 임의로 변경해서는 안

### 3. 안드로이드 프로젝트의 구성 2

#### AndroidManifest.xml

##### 대표적인 역할

- 실행을 위한 소유 권한 정의

##### 안드로이드 주요 컴포넌트

- 액티비티
  - 하나의 스마트폰 화면을 관리하는 컴포넌트
- 서비스
  - 백그라운드에서 독립적으로 동작하는 컴포넌트
- 방송 수신자
  - 안드로이드 플랫폼에서 발생하는 다양한 이벤트를 수신하고 처리하는 컴포넌트
- 콘텐츠 제공자
  - 데이터를 체계적으로 관리하고 앱이 활용할 수 있도록 인터페이스를 제공하는 컴포넌

### 4. 안드로이드 앱의 동작 원리

#### 1. 앱의 실행과정

##### 실행하기 위한 과정

- 안드로이드 앱은 Java 언어를 이용하여 작성
- 개발자가 작성한 Java 코드는 Java 컴파일러에 의해 Java 바이트 코드로 컴파일
- Java 환에서는 JVM 위에서 실행되지만, 안드로이드는 ART/Dalvik이라고 하는 별도의 가상머신에서 Java 바이트 코드를 실행

- 안드로이드 SDK가 제공하는 DEX 변환기를 이용하여 JAVA 바이트 코드를 Dalvik의 실행 포맷인 .dex 파일(Dalvik 바이트코드)로 변환하게 됨
- 변환된 .dex 파일과 리소스 파일들은 설치할 수 있는 .apk 파일로 만듦(마지막 Java Source Files 부분)

##### 안드로이드 프로젝트 실행 과정

- 배포 및 설치를 위한 .apk 파일의 생성은 AAPT라는 개발도구를 이용하고, 이 과정을 패키징이라고 함
- 패키징 과정이 끝나 만들어진 .apk 파일을 플랫폼에 설치하면 런타임에서 실행될 수 있음

![image-20240223075441569](D:\Elio Jung\TIL\방송통신대학교\4학년1학기\모바일앱프로그래밍\md-images\image-20240223075441569.png)

##### 안드로이드 프로젝트 배포 과정

- 컴파일된 리소스 파일(xml)은 resources.arsc라는 파일로 생성되고, 안드로이드 앱의 설정 환경을 정의하는  AndroidManifest.xml 파일이 생성됨
- 최종적으로 컴파일되지 않은 리소스 파일들과 .dex 파일, resources.arsc 파일, AndroidManifest.xml 피ㅏ일이 함께 패키징되어 .apk 파일이 생성

![image-20240223080130150](D:\Elio Jung\TIL\방송통신대학교\4학년1학기\모바일앱프로그래밍\md-images\image-20240223080130150.png)

##### 배포하는 과정

- 서명 key를 이용하여 .apk 파일에 서명 작업을 하여 .apk 파일이 타인에 의해서 위변조되는 것을 방지
- 마지막으로 다양한 앱을 공유하거나 거래할 수 있는 마켓인 Google Play에 업로드를 수행함