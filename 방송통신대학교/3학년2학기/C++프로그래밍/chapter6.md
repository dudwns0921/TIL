# C++ 프로그래밍

## 6강. 클래스와 객체 (2)

### 1. 디폴트 생성자

#### (1) 디폴트 생성자의 개념

##### > 디폴트 생성자란?

- 매개변수가 없는 생성자 혹은 모든 매개변수에 디폴트 값이 있는 경우
- 클래스를 선언할 때 생성자를 선언하지 않으면 컴파일러는 묵시적으로 디폴트 생성자를 정의
- 생성자를 하나라도 정의하면 컴파일러는 생성자를 정의하지 않음

#### (2) 디폴트 생성자의 활용 (4/4)

- 특정 생성자를 선언하면 배열로 선언이 불가

### 2. 복사 생성자

#### (1) 복사 생성자의 개념

##### > 복사 생성자란?

- 동일 클래스의 객체를 복사하여 객체를 만드는 생성자
- 묵시적 복사 생성자 : 객체의 데이터 멤버들을 그대로 복사하여 객체를 만들도록 묵시적으로 정의된 복사 생성자
- 대입 연산자 사용시 복사 생성자 사용
  - Counter cnt1{99}
  - Counter cnt2{cnt1}
  - Counter cnt3 = cnt1

#### (2) 얕은 복사의 문제점

- 데이터 멤버를 그대로 복사
- 포인터도 함께 복사해서 동일한 자원을 공유하게 됨
- 원본 객체가 메모리를 반납한 후 얕은 복사를 통해 생성된 객체도 동일한 메모리를 반납하려고 시도
- 시스템에서 오류 발생
- 자원을 동적으로 할당받는 경우 얕은 복사를 사용하면 문제가 발생할 수 있음
- 복사 생성자를 통해 이러한 문제를 해결할 수 있음
- 별도로 메모리를 만들어 복사를 진행하게끔 하면 이러한 문제가 해결되며, deep copy라고 칭함

### 3. 이동 생성자

#### (1) 불필요한 복사의 비효율성

이동 생성자는 매개변수로 전달된, 앞으로 더 이상 필요하지 않을 객체의 내용을 ‘이동’하여 새로운 객체를 생성하기 위해 사용한다.

#### (2) rvalue 참조 (1/2)

##### > 전통적 의미의 lvalue와 rvalue

- lvalue는 값을 저장할 수 있는 실체가 있어야 함
- rvalue는 단순히 값만 있으면 됨

##### > C++11 이후의 식의 분류

- expression
  - gvalue :실체가 있는 식
    - gvalue와 rvalue 교집합 제외 (lvalue) : &, 참조 가능
  - rvalue : 가지고 있는 자원을 다른 곳으로 이동시킬 수 있는 식
    - gvalue와 rvalue 교집합 제외 (prvalue)
  - xvalue : expire될 수 있는 식
  - xvalue, rvalue는 rvalue 참조로 참조 가능

#### (2) rvalue 참조 (2/2)

- & 기호로 선언하는 lvalue와 달리 rvalue 참조는 && 기호로 선언

##### > lvalue 참조와 rvalue 참조의 사용 예

- const int& b = 20;
  - 상수 lvalue 참조로는 rvalue를 참조할 수 있음
- 함수의 리턴값은 rvalue, 함수의 반환값을 참조할 때는 rvalue 참조를 사용해야 함

#### (3) 이동 생성자의 개념

##### > 이동 생성자란?

- rvalue 참조로 전달된 같은 클래스의 객체의 내용을 이동하여 객체를 만드는 생성자

### 4. static 데이터 멤버와 static 멤버함수

#### (1) 객체의 메모리 공간 (1/4)

- 데이터 멤버를 개별적으로 가지지만 공유 멤버함수는 하나의 메모리 공간을 함께 사용

#### (2) 객체의 메모리 공간 (2/4)

##### > static 데이터 멤버

- 클래스에 속하는 모든 객체들이 공유하는 데이터 멤버
- 객체 생성과 관계 없이 프로그램이 시작되면 static 데이터 멤버를 위한 메모리 공간이 할당
- 일반 데이터 멤버와 달리 static 데이터 멤버는 클래스 선언문 내에서는 선언만 하고 클래스 외부에서 별도로 정의