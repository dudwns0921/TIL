# NextJS

## 개요

- 리액트 전용 앱 프레임워크
- 리액트의 확장판 정도로 이해
  - 페이지 라우팅
  - 빌트인 최적화 기능
  - 다이나믹 HTML 스트리밍
- vercel에서 개발, 오픈소스로 운영중

## 사전 렌더링

- 개요
  - 브라우저 요청에 사전에 렌더링이 완료된 HTML을 응답하는 렌더링 방식
- 렌더링 과정
  - 사전 렌더링의 경우 서버에서 JS를 실행(리액트 컴포넌트를 렌더링)해 렌더링이 완료된 HTML을 사용자에게 전달
  - 이 때는 사용자 상호작용이 불가능
  - 서버에서 JS 번들을 전달해주고 Hydration이 일어나야 상호작용이 가능해짐
  - 이 때 상호작용이 가능한 시점까지의 시간을 TTI라고 함
- 페이지 이동
  - CSR 방식으로 처리
  - JS를 실행해 컴포넌트를 교체하는 방식
- NextJS 장점
  -  사전 렌더링을 통해 FCP 개선
  - 기존 CSR의 장점인 빠른 페이지 이동은 그대로 승계

## Page Router

- pages 폴더 기반으로 라우팅 제공
- 파일명 기반의 페이지 라우팅
- 폴더명으로도 라우팅을 적용할 수 있음
- 동적 경로의 경우 파일명을 대괄호로 묶어주면 됨
- nextjs 프로젝트 생성시
  - pages 하위의 _[파일명]
  - 기본 설정을 확장하거나 커스터마이징할 때 사용
  - _app.tsx
    - 루트 컴포넌트의 역할
  - _document.tsx
    - 기본 HTML 문서 커스터마이징

## 페이지 라우팅 설정하기

- useRouter
  - next/Router의 hook을 사용해서 페이지 라우터 기능 사용 가능
- 동적 경로
  - 연속된 id에 대한 처리
    - [...id].tsx
    - catch all segment
    - 인덱스 경로에 대해서는 catch할 수 없음
      - 대괄호로 한 번 더 감싸줄 경우 인덱스까지도 대응할 수 있음
      - [[...id]].tsx
      - optional catch all segment
- 404
  - pages 폴더 아래 404.tsx 파일 생성
