# 15강. 메모리 동적할당

## 1. 메모리 동적할당의 개념

- 프로그램의 실행을 위해 기억공간 필요
- 기억공간은 운영체제에서 할당
- 할당되는 기억공간의 영역
  - 데이터 영역
  - 힙 영역
  - 스택 영역
- 기억 공간의 확보 방법
  - 메모리 정적 할당
    - 기억공간의 데이터 영역과 스택 영역 이용
    - 프로그램을 작성하는 단계에서 필요한 기억공간의 크기를 결정
      - 자료형이 정의되었다 -> 기억공간의 크기가 결정되었다
  - 메모리 동적 할당
    - 기억공간의 힙 영역 이용
    - 프로그램 실행 중에 입력되는 자료에 맞게끔 기억공간의 크기를 결정
- 기억공간의 할당 영역
  - 데이터 영역
    - 전역 변수와 static 변수가 저장되는 영역
    - 프로그램 시작시 할당, 종료시 소멸
  - 힙 영역
    - 프로그래머의 필요에 의해 할당/소멸이 이루어지는 영역
    - 실행이 되면서 그 크기가 늘어나고 줄어들어 자유 기억공간으로 불림
    - 메모리 동적 할당에 사용되는 영역
  - 스택 영역
    - 지역 변수와 매개변수가 저장되는 영역

## 2. 메모리 정적할당

- 변수 선언이나 배열 선언과 같이 프로그램을 작성하는 단게에서 필요한 기억 공간의 크기를 결정
  - 변수 선언과 같이 할당시켜 줘야 할 기억공간의 한계 크기를 명확히 알고 있을 경우 사용
  - 메모리 정적할당은 프로그램이 시작될 때 미리 기억공간의 크기를 고정하여 할당
- 메모리 정적할당의 장, 단점
  - 장점
    - 프로그램에서 사용하게 될 변수의 기억 공간의 크기를 명확히 알고 있다면,
      - 메모리 정적할당은 쉽게 기억 공간을 사용할 수 있고, 에러의 발생 확률을 줄일 수 있음
  - 단점
    - 사용하게 될 기억 공간의 크기를 정확히 알지 못하거나, 사용되는 자료의 크기가 각각 차이가 심하다면,
      - 기억 공간의 낭비를 가져오게 되는 문제점

## 3. 메모리 동적할당 함수

- 힙 영역을 이용해서 프로그램 실행 중에 입력되는 자료의 크기에 맞게 기억 공간을 확보
- 많은 자료를 처리하는 배열의 크기를 실행중 정의해야 하는 경우에 특히 유용
- 프로그램 실행 시 기억 공간의 크기를 지정할 수 있고, 재조정이 가능
- 시간이 지체되는 단점이 있음

### 메모리 동적할당 순서

 - 기억공간을 동적으로 할당 받은 변수를 포인터를 이용하여 선언한다.
 - malloc() 함수 등을 이용하여 기억공간을 동적으로 할당
 - 기억공간의 사용이 끝나면 free() 함수를 이용하여 기억공간을 해제

### malloc() 함수

- 인자로 할당받고자 하는 기억 공간의 크기를 byte 단위로 전달
- 힙 영역에 그 크기만큼 기억 공간을 할당하고, 할당한 기억 공간의 첫 번째 주소를 반환
- void* 로 명시하여 어떤 형으로든 형 변환이 가능
- 초기화 안됨

### free() 함수

- 힙 영역에 할당된 공간은 프로그램 종료까지 유지
- 할당된 기억 공간을 해제하지 않으면 기억공간의 부족 현상이 생김
- 따라서 명시적 반납이 필요

## 4. 기억공간 관리함수

- memcmp
- memcpy
- memset
